!function(){var t,n,e,a,r;(function(t){return t.replace(/臺/g,"台")}),t={"合一行動聯盟":null,"中華統一促進黨":null,"親民黨":"#f90","安定力量":null,"台灣基進":"#984a34","時代力量":"#ff0","新黨":null,"喜樂島聯盟":null,"中國國民黨":"#00f","一邊一國行動黨":"#5bafb7","勞動黨":null,"綠黨":"#7ac7a0","宗教聯盟":null,"民主進步黨":"#0f0","台灣民眾黨":"#0ff","台灣維新":null,"台澎黨":null,"國會政黨聯盟":null,"台灣團結聯盟":"#c6a260"},n=function(n){var e;return(e=r.map[n]).fit(),d3.select(e.root).selectAll("path").attr("fill",function(e){var a,i;return a=r.data[e.properties.name][n][0],i=t[a]||"#ccc",r.highlight&&a!==r.highlight&&(i="#ccc"),i}).attr("stroke",function(){return"#000"}).attr("stroke-width",function(){return 0})},e=popupWrap(function(t){var n,e;return n=t.data,t.evt,e=t.node,e.innerHTML+="<div>"+r.data[n.properties.name].win[0]+"</div>"}),a=popupWrap(function(t){var n,e;return n=t.data,t.evt,e=t.node,e.innerHTML+="<div>"+r.data[n.properties.name].lose[0]+"</div>"}),r={map:{}},r.map.win=pdmaptw.create({root:ld$.find(document,"#map-relative-party-positive",0),type:"town",popup:e}),r.map.lose=pdmaptw.create({root:ld$.find(document,"#map-relative-party-negative",0),type:"town",popup:a}),r.map.win.init().then(function(){return r.map.lose.init()}).then(function(){return ld$.fetch("assets/data/政黨票相對全國落差.json",{method:"GET"},{type:"json"})}).then(function(t){return r.data=t}).then(function(){var e,a,i,l,o;for(e=0,i=(a=["win","lose"]).length;e<i;++e)n(l=a[e]),new ldView({root:"[ld-scope=relative-party-"+("win"===l?"positive":"negative")+"]",handler:{label:{list:function(){var n,e;return function(){var a,r=[];for(n in a=t)e=a[n],r.push([n,e]);return r}().filter(function(t){return t[1]}).map(function(t){return t[0]})},handle:function(n){var e,a;return e=n.data,a=n.node,ld$.find(a,".dot",0).style.background=t[e]||"#ccc",ld$.find(a,".name",0).innerText=e,a.setAttribute("data-name",e),a.classList.add("clickable")}}}});return(o=ld$.find(document,"#map-relative-party",0)).addEventListener("mousemove",function(t){var e,a;console.log(ld$.parent(t.target,".label",o));{if(e=ld$.parent(t.target,".label",o))return a=e.getAttribute("data-name"),r.highlight=a,n("win"),n("lose");r.highlight&&(r.highlight=null,n("win"),n("lose"))}})})}();