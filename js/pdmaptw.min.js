function import$(t,e){var o={}.hasOwnProperty;for(var r in e)o.call(e,r)&&(t[r]=e[r]);return t}!function(){var t;t=function(t){return null==t&&(t={}),this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.lc={},this.type=t.type,this.popup=t.popup,this},t.prototype=import$(Object.create(Object.prototype),{init:function(){var t,e,o,r,n=this;return t={root:this.root,type:this.type,popup:this.popup},e=t.root,o=t.type,r=t.popup,e.addEventListener("mousemove",function(t){var e,o;if((e=t.target)&&1===e.nodeType&&(o=d3.select(e).datum()))return null!=r?r({evt:t,data:o}):void 0}),ld$.fetch("assets/lib/pdmap.tw/"+o+".topo.json",{method:"GET"},{type:"json"}).then(function(t){return n.lc.topo=t,ld$.fetch("assets/lib/pdmap.tw/"+o+".meta.json",{method:"GET"},{type:"json"})}).then(function(t){var o,r;return n.lc.meta=t,n.lc.features=o=topojson.feature(n.lc.topo,n.lc.topo.objects.pdmaptw).features,o.map(function(e){var o;return o=[t.name[e.properties.c],t.name[e.properties.t],t.name[e.properties.v]].filter(function(t){return t}).join(""),e.properties.name=pdmaptw.normalize(o)}),o=o.filter(function(t){return"金門縣烏坵鄉"!==t.properties.name}),n.lc.path=r=d3.geoPath().projection(pdmaptw.projection),d3.select(e).append("svg").append("g").selectAll("path").data(o).enter().append("path").attr("d",r)})},fit:function(){var t,e,o,r,n,p,i,a,s,u,c;return t=this.root,e=ld$.find(t,"g",0),(o=d3.select(t).select("svg")).attr("width","100%"),o.attr("height","100%"),r=t.getBoundingClientRect(),n=e.getBBox(),p=[r.width,r.height],i=p[0],a=p[1],20,s=Math.min((i-40)/n.width,(a-40)/n.height),p=[i/2,a/2],u=p[0],c=p[1],e.setAttribute("transform","translate("+u+","+c+") scale("+s+") translate("+(-n.x-n.width/2)+","+(-n.y-n.height/2)+")")}}),pdmaptw.create=function(e){return null==e&&(e={}),new t(e)},pdmaptw.normalize=function(t){return t.replace(/臺/g,"台")}}();